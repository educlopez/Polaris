---
import "@/styles/global.css";
import { ClientRouter } from "astro:transitions";
import {
  Linkedin,
  Github,
  Dribbble,
  Twitter,
  Mail,
  Instagram,
  Youtube,
  Palette,
  Figma,
  BookOpen,
} from "@lucide/astro";

import Head from "@/components/head.astro";
import siteConfig from "@/config/site.json";
import Fade from "@/components/fade.astro";

// Extend the Props interface to include all head options
interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  author?: string;
  image?: string;
  url?: string;
  type?: "website" | "article" | "profile";
  publishedTime?: string;
  modifiedTime?: string;
  section?: string;
  tags?: string[];
  twitterCard?: "summary" | "summary_large_image" | "app" | "player";
  twitterCreator?: string;
  twitterSite?: string;
  noindex?: boolean;
  nofollow?: boolean;
  canonical?: string;
  ogLocale?: string;
  ogSiteName?: string;
  themeColor?: string;
  colorScheme?: "light" | "dark" | "light dark";
  viewport?: string;
  robots?: string;
}

const props = Astro.props;

const { company, contact } = siteConfig;

// Define which social networks to show in footer (showing only those with actual URLs)
const footerSocials = [
  { name: "LinkedIn", url: contact.linkedin, icon: Linkedin },
  { name: "GitHub", url: contact.github, icon: Github },
  { name: "Dribbble", url: contact.dribbble, icon: Dribbble },
  { name: "Twitter", url: contact.twitter, icon: Twitter },
  { name: "Instagram", url: contact.instagram, icon: Instagram },
  { name: "YouTube", url: contact.youtube, icon: Youtube },
  { name: "Behance", url: contact.behance, icon: Palette },
  { name: "Figma", url: contact.figma, icon: Figma },
  { name: "Medium", url: contact.medium, icon: BookOpen },
].filter(
  (social) =>
    social.url &&
    social.url !== "" &&
    social.url !== "#" &&
    !social.url.includes("placeholder") &&
    !social.url.includes("example.com")
);
---

<!doctype html>
<html lang="en">
  <head>
    <Head {...props} />
    <ClientRouter />
  </head>
  <body
    class="flex min-h-screen w-full flex-col font-medium leading-snug tracking-tight antialiased"
  >
    <Fade
      side="top"
      background="white"
      className="!fixed z-2"
      height="30px"
      stop="25%"
      blur="4px"
    />

    <!-- Main content wrapper -->
    <main class="flex lg:flex-row flex-col gap-8 min-h-screen">
      <!-- Left static section -->
      <div
        class="flex flex-col gap-8 lg:justify-between py-8 px-4 w-full max-w-sm shrink-0 lg:h-screen lg:sticky lg:top-0 z-10"
      >
        <slot name="left-content" />
        <!-- Desktop footer - positioned within left column -->
        <div class="hidden lg:block w-full flex-col gap-4">
          <!-- Social Links -->
          <div class="flex items-center gap-3 mb-4">
            {
              footerSocials.map((social) => {
                const IconComponent = social.icon;
                return (
                  <a
                    href={social.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-foreground/70 hover:text-foreground transition-colors"
                    aria-label={`Visit ${social.name}`}
                  >
                    <IconComponent class="w-4 h-4" />
                  </a>
                );
              })
            }
          </div>
          <p class="text-xs text-foreground/70">{company.footerText}</p>
          <p class="text-xs text-foreground/70">{company.copyright}</p>
        </div>
      </div>
      <!-- Right scrollable section -->
      <div class="flex flex-col gap-2 p-2 w-full max-w-7xl relative">
        <slot name="right-content" />
      </div>
    </main>

    <!-- Mobile footer - positioned at bottom of page -->
    <footer class="lg:hidden w-full py-8 px-4 border-t border-gray-200 mt-auto">
      <div class="w-full flex flex-col gap-4">
        <!-- Social Links -->
        <div class="flex items-center gap-4 mb-4">
          {
            footerSocials.map((social) => {
              const IconComponent = social.icon;
              return (
                <a
                  href={social.url}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-foreground/70 hover:text-foreground transition-colors"
                  aria-label={`Visit ${social.name}`}
                >
                  <IconComponent class="w-5 h-5" />
                </a>
              );
            })
          }
        </div>
        <p class="text-xs text-foreground/70">{company.footerText}</p>
        <p class="text-xs text-foreground/70">{company.copyright}</p>
      </div>
    </footer>
    <Fade
      background="white"
      side="bottom"
      className="!fixed z-2"
      height="30px"
      stop="25%"
      blur="4px"
    />
  </body>
</html>
